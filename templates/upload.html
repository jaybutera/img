{% extends "nav.html" %}

{% block body %}

<input type="file" multiple id="input-images">

<script>
    const fileInput = document.getElementById('input-images');
    fileInput.onchange = () => {
      const selectedFiles = [...fileInput.files];
      console.log(selectedFiles);
      //for (let f in selectedFiles) {
      for (let i = 0; i < selectedFiles.length; i++) {
          fetch('/{{ topic }}/new-image', {
            method: 'POST',
            body: selectedFiles[i],
          })
          .then( (res) => {
              if (res.ok) {
                  window.location.href = '/{{ topic }}';
              } else {
                  alert(`Error: ${res.statusText}` )
              }
          })
          .catch(function(err) {
            alert(`Error: ${err}` )
          });
      }
    }
</script>

{% endblock %}
